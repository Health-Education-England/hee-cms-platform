"use strict";function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}var Filter=function(){function e(t){_classCallCheck(this,e),this.container=t,this.checkboxes=_toConsumableArray(this.container.getElementsByClassName("nhsuk-checkboxes__input")),this.groups=_toConsumableArray(this.container.getElementsByClassName("nhsuk-filter__group")),this.submit=this.container.querySelector(".nhsuk-filter__submit"),this.setUp(),this.addEventListeners()}return _createClass(e,[{key:"addEventListeners",value:function(){var e=this;this.checkboxes.forEach(function(t){t.addEventListener("change",function(t){return e.updateResults(t)})}),this.groups.forEach(function(t){t=t.querySelector(".nhsuk-fieldset__legend");t&&t.addEventListener("click",function(t){return e.toggleGroup(t)})})}},{key:"setUp",value:function(){this.container.classList.add("nhsuk-filter--js"),this.groups.forEach(function(t){return t.classList.add("nhsuk-filter__group--closed")}),this.submit&&(this.submit.hidden=!0)}},{key:"toggleGroup",value:function(t){t.preventDefault(),t.target.closest(".nhsuk-filter__group").classList.toggle("nhsuk-filter__group--closed")}},{key:"updateResults",value:function(t){this.container.submit()}}]),e}();_toConsumableArray(document.getElementsByClassName("nhsuk-filter")).forEach(function(t){return new Filter(t)});var FilterTag=function(){function e(t){_classCallCheck(this,e),this.tag=t,this.icon=t.querySelector(".nhsuk-filter-tag__icon"),this.setUp(),this.addEventListeners()}return _createClass(e,[{key:"addEventListeners",value:function(){var e=this;this.tag.addEventListener("click",function(t){return e.removeFilter(t)})}},{key:"removeFilter",value:function(t){t.preventDefault(),document.querySelectorAll("input[value='".concat(this.tag.dataset.filter,"']")).forEach(function(t){t.checked=!1,t.dispatchEvent(new Event("change"))}),t.target.remove()}},{key:"setUp",value:function(){this.tag.classList.add("nhsuk-filter-tag--js"),this.icon&&(this.icon.hidden=!1)}}]),e}();_toConsumableArray(document.getElementsByClassName("nhsuk-filter-tag")).forEach(function(t){return new FilterTag(t)});var Listing=function(){function e(t){_classCallCheck(this,e),this.container=t,this.sort=this.container.querySelector(".nhsuk-listing__sort"),this.addEventListeners(),this.toggleJavascriptElements()}return _createClass(e,[{key:"addEventListeners",value:function(){var e=this;this.sort&&_toConsumableArray(this.sort.getElementsByTagName("select")).forEach(function(t){return t.addEventListener("change",function(t){return e.updateResults(t)})})}},{key:"toggleJavascriptElements",value:function(){var t;!this.sort||(t=this.sort.querySelector(".nhsuk-listing__sort__submit"))&&(t.hidden=!0)}},{key:"updateResults",value:function(){this.sort.submit()}}]),e}();_toConsumableArray(document.getElementsByClassName("nhsuk-listing")).forEach(function(t){return new Listing(t)});var Map=function(){function n(t,e){_classCallCheck(this,n),this.map=t,this.svg=e,this.regions=_toConsumableArray(e.getElementsByClassName("nhsuk-region")),this.list=_toConsumableArray(t.querySelectorAll("#regionList li a")),this.addLinksToMap(),this.addClasses(),this.mapEventListeners(),this.linkEventListeners()}return _createClass(n,[{key:"addClasses",value:function(){this.svg.querySelector("style").appendChild(document.createTextNode("\n      .hover {transform: scale(1.05);transform-origin: 75% 75%;transition-duration:2s;}\n      .hover * {stroke-width: 6;stroke-miterlimit: 1;}\n      .focus .st0 {fill:#ffeb3b;stroke:#212b32;}\n      .focus * {stroke-width: 6;stroke-miterlimit: 1;}\n    "))}},{key:"addLinksToMap",value:function(){var r=this;this.regions.forEach(function(t){var e=r.mapCounterpart(t.id),n=(e.href,e.alt||"/"),e=t.innerHTML,e='<a xlink:href="/" >\n        <title>'.concat(n,"</title>\n        ").concat(e,"\n      </a>");t.innerHTML=e})}},{key:"mapEventListeners",value:function(){var e=this;this.regions.forEach(function(t){return t.addEventListener("mouseenter",function(){return e.mapIn(t,"hover",!0)})}),this.regions.forEach(function(t){return t.addEventListener("mouseout",function(){return e.mapOut(t,"hover",!0)})}),this.regions.forEach(function(t){return t.addEventListener("click",function(t){return e.mapClick(t)})})}},{key:"linkEventListeners",value:function(){var e=this;this.list.forEach(function(t){return t.addEventListener("mouseenter",function(t){return e.linkEvent(t.target,"in","hover")})}),this.list.forEach(function(t){return t.addEventListener("mouseout",function(t){return e.linkEvent(t.target,"out","hover")})}),this.list.forEach(function(t){return t.addEventListener("focusin",function(t){return e.linkEvent(t.target,"in","focus")})}),this.list.forEach(function(t){return t.addEventListener("focusout",function(t){return e.linkEvent(t.target,"out","focus")})})}},{key:"moveToTop",value:function(t){t.parentElement.appendChild(t)}},{key:"mapIn",value:function(t,e,n){this.moveToTop(t),t.classList.add(e),!n||(t=this.mapCounterpart(t.id))&&t.classList.add("hover")}},{key:"mapOut",value:function(t,e,n){t.classList.remove(e),!n||(t=this.mapCounterpart(t.id))&&t.classList.remove("hover")}},{key:"mapClick",value:function(t){t.preventDefault();t=this.mapCounterpart(t.target.closest("g").id);t&&t.click()}},{key:"mapCounterpart",value:function(e){return this.list.find(function(t){return t.id===e})}},{key:"linkEvent",value:function(t,e,n){t=t.id,t=this.linkCounterpart(t);"in"===e?this.mapIn(t,n):this.mapOut(t,n)}},{key:"linkCounterpart",value:function(e){return this.regions.find(function(t){return t.id===e})}}]),n}();_toConsumableArray(document.querySelectorAll(".nhsuk-map")).forEach(function(e){var n=e.querySelector("object");n.addEventListener("load",function(){var t=n.getSVGDocument().querySelector("svg");new Map(e,t)})});